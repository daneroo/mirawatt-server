
var app = app || {};

(function(){
    var numSensors=10; // min 3 if

    var s;
    var labels=['Time'];
    for (s=0;s<numSensors;s++) labels.push('sensor '+(s+1));
    
    app.models=[];

    app.models.push({ // Live - made of seconds
        numSensors:numSensors,
        numSamples:60,
        data:[],
        options:{
            stepPlot:false
        },
        labels:labels,
        colors:null,
        sourceModel:randModel,
        colorModel:hueColorModel,
        init:function(model){
            var t = new Date();            
            var i;
            for (i = model.numSamples; i >= 0; i--) {
              var x = new Date(t.getTime() - i * 1000);
              model.data.push(model.sourceModel(x,model.numSensors));
            }
            model.colors=model.colorModel(model.numSensors,1/3);
        },
        update:function(model){
            var x = new Date();  // current time      
            // truncate - could be more efficient
            var toremove=model.data.length-(model.numSamples-1);
            if (toremove>0) model.data.splice(0,toremove);
            model.data.push(model.sourceModel(x,model.numSensors));
        }
    });
    app.models.push({ // Hour Scope, made of minutes
        numSensors:numSensors,
        numSamples:0,
        data:[],
        options:{
            stepPlot:false
        },
        labels:labels,
        colors:null,
        colorModel:hueColorModel,
        init:function(model){
            var t = new Date();            
            t.setMilliseconds(0);
            t.setSeconds(0);
            var scope=sampleState().minute;
            console.log('minute',scope);
            $.each(scope,function(k,v){
                model.numSamples++;
            });
            var i=model.numSamples;
            $.each(scope,function(k,v){
                var x = new Date(t.getTime() - i * 60000);
                model.data.push(splitModel(x,v.sum/v.n,model.numSensors));
                i--;
            });
            model.colors=model.colorModel(model.numSensors,2/3);
        },
        update:function(model){
        }
    });
    app.models.push({ // Day Scope, made of hours
        numSensors:numSensors,
        numSamples:0,
        data:[],
        options:{
            stepPlot:true
        },
        labels:labels,
        colors:null,
        colorModel:rainbowColorModel,
        init:function(model){
            var t = new Date();            
            t.setMilliseconds(0);
            t.setSeconds(0);
            t.setMinutes(0);
            var scope=sampleState().hour;
            console.log('hour',scope);
            $.each(scope,function(k,v){
                model.numSamples++;
            });
            var i=model.numSamples;
            $.each(scope,function(k,v){
                var x = new Date(t.getTime() - i * 3600000);
                model.data.push(splitModel(x,v.sum/v.n,model.numSensors));
                i--;
            });
            model.colors=model.colorModel(model.numSensors,3/3);
        },
        update:function(model){
        }
    });



    app.models[0].init(app.models[0]);
    //console.log(app.models[0]);
    app.models[1].init(app.models[1]);
    //console.log(app.models[1]);
    app.models[2].init(app.models[2]);
    //console.log(app.models[2]);

    function splitModel(x,v,numSensors){ // x is a Date
        var row = [x];
        // v is average power - kWh/d :== v*24
        v = v/1000; // *24 for kWh/d ?
        for (s=0;s<numSensors;s++) row.push(v/numSensors);
        return row;
    }

    function randSensor(){
        return Math.random()*.5+.5;
    }
    function randModel(x,numSensors){ // x is a Date
        var row = [x];
        for (s=0;s<numSensors;s++) row.push(randSensor());
        return row;
    }

    function miraModel(x,numSensors){ // x is a Date
        var row = [x];
        // for (s=0;s<numSensors;s++) row.push(randSensor());
        var sec = x.getSeconds()/60;
        var m = (sec<=.25)?Math.abs(Math.sin(sec*8*Math.PI)):0;
        var w = (sec>.25 && sec<=.5)?1-Math.abs(Math.sin(sec*8*Math.PI)):1;
        m=4*m;w=4*w;
        row.push(0-m-w,m,w);
        for (s=3;s<numSensors;s++) row.push((sec>.5)?randSensor():0);
        return row;
    }

    function hueColorModel(numSensors,h){
        var colors=[];
        for (s=0;s<numSensors;s++) colors.push(hsl(h,1,.3+(s%3)/10));
        for (s=0;s<numSensors;s++) colors.push(hsl(s/numSensors,1,.5));
        return colors;
    }
    function rainbowColorModel(numSensors,h){
        var colors=[];
        //for (s=0;s<numSensors;s++) colors.push(hsl(h,1,.3+(s%3)/10));
        for (s=0;s<numSensors;s++) colors.push(hsl(s/numSensors,1,.5));
        //console.log('colors',colors);
        return colors;
    }

    function sampleState() { return { 
        minute: { 
            '2012-01-30T17:40:00.000Z': { sum: 117140, n: 60 },
            '2012-01-30T17:41:00.000Z': { sum: 120280, n: 60 },
            '2012-01-30T17:42:00.000Z': { sum: 135510, n: 60 },
            '2012-01-30T17:43:00.000Z': { sum: 154840, n: 60 },
            '2012-01-30T17:44:00.000Z': { sum: 153440, n: 60 },
            '2012-01-30T17:45:00.000Z': { sum: 151260, n: 60 },
            '2012-01-30T17:46:00.000Z': { sum: 148810, n: 60 },
            '2012-01-30T17:47:00.000Z': { sum: 145010, n: 60 },
            '2012-01-30T17:48:00.000Z': { sum: 118280, n: 60 },
            '2012-01-30T17:49:00.000Z': { sum: 117690, n: 60 },
            '2012-01-30T17:50:00.000Z': { sum: 114530, n: 60 },
            '2012-01-30T17:51:00.000Z': { sum: 108600, n: 60 },
            '2012-01-30T17:52:00.000Z': { sum: 88380, n: 60 },
            '2012-01-30T17:53:00.000Z': { sum: 34150, n: 60 },
            '2012-01-30T17:54:00.000Z': { sum: 36560, n: 60 },
            '2012-01-30T17:55:00.000Z': { sum: 67100, n: 60 },
            '2012-01-30T17:56:00.000Z': { sum: 68600, n: 60 },
            '2012-01-30T17:57:00.000Z': { sum: 66800, n: 60 },
            '2012-01-30T17:58:00.000Z': { sum: 62870, n: 60 },
            '2012-01-30T17:59:00.000Z': { sum: 64210, n: 60 },
            '2012-01-30T18:00:00.000Z': { sum: 38760, n: 60 },
            '2012-01-30T18:01:00.000Z': { sum: 32990, n: 60 },
            '2012-01-30T18:02:00.000Z': { sum: 34140, n: 60 },
            '2012-01-30T18:03:00.000Z': { sum: 32770, n: 60 },
            '2012-01-30T18:04:00.000Z': { sum: 29170, n: 60 },
            '2012-01-30T18:05:00.000Z': { sum: 31760, n: 60 },
            '2012-01-30T18:06:00.000Z': { sum: 30100, n: 60 },
            '2012-01-30T18:07:00.000Z': { sum: 33400, n: 60 },
            '2012-01-30T18:08:00.000Z': { sum: 67410, n: 60 },
            '2012-01-30T18:09:00.000Z': { sum: 67630, n: 60 },
            '2012-01-30T18:10:00.000Z': { sum: 67130, n: 60 },
            '2012-01-30T18:11:00.000Z': { sum: 64150, n: 60 },
            '2012-01-30T18:12:00.000Z': { sum: 63210, n: 60 },
            '2012-01-30T18:13:00.000Z': { sum: 35090, n: 60 },
            '2012-01-30T18:14:00.000Z': { sum: 82080, n: 60 },
            '2012-01-30T18:15:00.000Z': { sum: 251640, n: 60 },
            '2012-01-30T18:16:00.000Z': { sum: 285370, n: 60 },
            '2012-01-30T18:17:00.000Z': { sum: 286380, n: 60 },
            '2012-01-30T18:18:00.000Z': { sum: 285170, n: 60 },
            '2012-01-30T18:19:00.000Z': { sum: 284590, n: 60 },
            '2012-01-30T18:20:00.000Z': { sum: 292640, n: 60 },
            '2012-01-30T18:21:00.000Z': { sum: 314860, n: 60 },
            '2012-01-30T18:22:00.000Z': { sum: 314110, n: 60 },
            '2012-01-30T18:23:00.000Z': { sum: 313760, n: 60 },
            '2012-01-30T18:24:00.000Z': { sum: 310680, n: 60 },
            '2012-01-30T18:25:00.000Z': { sum: 313900, n: 60 },
            '2012-01-30T18:26:00.000Z': { sum: 285290, n: 60 },
            '2012-01-30T18:27:00.000Z': { sum: 146320, n: 60 },
            '2012-01-30T18:28:00.000Z': { sum: 108630, n: 60 },
            '2012-01-30T18:29:00.000Z': { sum: 108650, n: 60 },
            '2012-01-30T18:30:00.000Z': { sum: 110560, n: 60 },
            '2012-01-30T18:31:00.000Z': { sum: 109190, n: 60 },
            '2012-01-30T18:32:00.000Z': { sum: 109500, n: 60 },
            '2012-01-30T18:33:00.000Z': { sum: 121230, n: 60 },
            '2012-01-30T18:34:00.000Z': { sum: 143440, n: 60 },
            '2012-01-30T18:35:00.000Z': { sum: 141260, n: 60 },
            '2012-01-30T18:36:00.000Z': { sum: 140600, n: 60 },
            '2012-01-30T18:37:00.000Z': { sum: 137180, n: 60 }},
        hour: { 
         '2012-01-28T20:00:00.000Z': { sum: 15482410, n: 3600 },
         '2012-01-28T21:00:00.000Z': { sum: 14584647, n: 3600 },
         '2012-01-28T22:00:00.000Z': { sum: 8581850, n: 3594 },
         '2012-01-28T23:00:00.000Z': { sum: 3399360, n: 3561 },
         '2012-01-29T00:00:00.000Z': { sum: 3608770, n: 3316 },
         '2012-01-29T01:00:00.000Z': { sum: 4664220, n: 3600 },
         '2012-01-29T02:00:00.000Z': { sum: 5410490, n: 3600 },
         '2012-01-29T03:00:00.000Z': { sum: 6155850, n: 3600 },
         '2012-01-29T04:00:00.000Z': { sum: 6823750, n: 3600 },
         '2012-01-29T05:00:00.000Z': { sum: 3644320, n: 3600 },
         '2012-01-29T06:00:00.000Z': { sum: 3524540, n: 3600 },
         '2012-01-29T07:00:00.000Z': { sum: 2772550, n: 3600 },
         '2012-01-29T08:00:00.000Z': { sum: 2730330, n: 3594 },
         '2012-01-29T09:00:00.000Z': { sum: 2660390, n: 3580 },
         '2012-01-29T10:00:00.000Z': { sum: 2631210, n: 3272 },
         '2012-01-29T11:00:00.000Z': { sum: 2464000, n: 3436 },
         '2012-01-29T12:00:00.000Z': { sum: 2719820, n: 3599 },
         '2012-01-29T13:00:00.000Z': { sum: 5859330, n: 3590 },
         '2012-01-29T14:00:00.000Z': { sum: 13270410, n: 3600 },
         '2012-01-29T15:00:00.000Z': { sum: 7191190, n: 3600 },
         '2012-01-29T16:00:00.000Z': { sum: 3891830, n: 3600 },
         '2012-01-29T17:00:00.000Z': { sum: 3044880, n: 3600 },
         '2012-01-29T18:00:00.000Z': { sum: 8121280, n: 3592 },
         '2012-01-29T19:00:00.000Z': { sum: 6822130, n: 3587 },
         '2012-01-29T20:00:00.000Z': { sum: 13714380, n: 3315 },
         '2012-01-29T21:00:00.000Z': { sum: 10263020, n: 3564 },
         '2012-01-29T22:00:00.000Z': { sum: 7686410, n: 3600 },
         '2012-01-29T23:00:00.000Z': { sum: 12925586, n: 3600 },
         '2012-01-30T00:00:00.000Z': { sum: 8418600, n: 3600 },
         '2012-01-30T01:00:00.000Z': { sum: 6222080, n: 3600 },
         '2012-01-30T02:00:00.000Z': { sum: 9062160, n: 3600 },
         '2012-01-30T03:00:00.000Z': { sum: 4053820, n: 3600 },
         '2012-01-30T04:00:00.000Z': { sum: 2889990, n: 3600 },
         '2012-01-30T05:00:00.000Z': { sum: 2003830, n: 3591 },
         '2012-01-30T06:00:00.000Z': { sum: 2438880, n: 3468 },
         '2012-01-30T07:00:00.000Z': { sum: 2392230, n: 3406 },
         '2012-01-30T08:00:00.000Z': { sum: 2850940, n: 3600 },
         '2012-01-30T09:00:00.000Z': { sum: 3187720, n: 3600 },
         '2012-01-30T10:00:00.000Z': { sum: 4797980, n: 3600 },
         '2012-01-30T11:00:00.000Z': { sum: 3186640, n: 3600 },
         '2012-01-30T12:00:00.000Z': { sum: 8215730, n: 3600 },
         '2012-01-30T13:00:00.000Z': { sum: 10250920, n: 3600 },
         '2012-01-30T14:00:00.000Z': { sum: 2849720, n: 3600 },
         '2012-01-30T15:00:00.000Z': { sum: 3546050, n: 3595 },
         '2012-01-30T16:00:00.000Z': { sum: 5296470, n: 3567 },
         '2012-01-30T17:00:00.000Z': { sum: 8554560, n: 3266 },
         '2012-01-30T18:00:00.000Z': { sum: 5636240, n: 2285 } },
      day: 
       {
         '2012-01-01T05:00:00.000Z': { sum: 132171630, n: 85405 },
         '2012-01-02T05:00:00.000Z': { sum: 117836150, n: 85704 },
         '2012-01-03T05:00:00.000Z': { sum: 120764990, n: 85298 },
         '2012-01-04T05:00:00.000Z': { sum: 183535480, n: 85702 },
         '2012-01-05T05:00:00.000Z': { sum: 150838700, n: 85678 },
         '2012-01-06T05:00:00.000Z': { sum: 154029370, n: 85400 },
         '2012-01-07T05:00:00.000Z': { sum: 122337536, n: 85682 },
         '2012-01-08T05:00:00.000Z': { sum: 120702290, n: 85703 },
         '2012-01-09T05:00:00.000Z': { sum: 166881555, n: 85325 },
         '2012-01-10T05:00:00.000Z': { sum: 99939760, n: 85676 },
         '2012-01-11T05:00:00.000Z': { sum: 144649800, n: 85659 },
         '2012-01-12T05:00:00.000Z': { sum: 162649107, n: 85337 },
         '2012-01-13T05:00:00.000Z': { sum: 138354170, n: 85670 },
         '2012-01-14T05:00:00.000Z': { sum: 100672640, n: 85677 },
         '2012-01-15T05:00:00.000Z': { sum: 121893690, n: 85366 },
         '2012-01-16T05:00:00.000Z': { sum: 139873880, n: 85676 },
         '2012-01-17T05:00:00.000Z': { sum: 149818350, n: 85654 },
         '2012-01-18T05:00:00.000Z': { sum: 143720410, n: 85366 },
         '2012-01-19T05:00:00.000Z': { sum: 131546630, n: 85699 },
         '2012-01-20T05:00:00.000Z': { sum: 150568395, n: 85667 },
         '2012-01-21T05:00:00.000Z': { sum: 163730090, n: 85289 },
         '2012-01-22T05:00:00.000Z': { sum: 160046780, n: 85737 },
         '2012-01-23T05:00:00.000Z': { sum: 147612760, n: 85594 },
         '2012-01-24T05:00:00.000Z': { sum: 182532350, n: 85203 },
         '2012-01-25T05:00:00.000Z': { sum: 165395600, n: 85826 },
         '2012-01-26T05:00:00.000Z': { sum: 145378639, n: 85505 },
         '2012-01-27T05:00:00.000Z': { sum: 108955390, n: 85235 },
         '2012-01-28T05:00:00.000Z': { sum: 156393517, n: 85591 },
         '2012-01-29T05:00:00.000Z': { sum: 146584256, n: 85529 },
         '2012-01-30T05:00:00.000Z': { sum: 65207910, n: 48378 } },
      month: { keep: 12 },
      year: { keep: 1000 },
      all: { sum: 8692755535, n: 5284112 } }
  };
  var feeds=[
    {
      "scopeId": 0,
      "name": "Live",
      "stamp": "2012-01-31T01:28:33Z",
      "value": 1490,
      "observations": [
        [
          "2012-01-31T01:28:33Z",
          "1490"
        ],
        [
          "2012-01-31T01:28:32Z",
          "1490"
        ],
        [
          "2012-01-31T01:28:31Z",
          "1490"
        ],
        [
          "2012-01-31T01:28:30Z",
          "1490"
        ],
        [
          "2012-01-31T01:28:29Z",
          "1490"
        ],
        [
          "2012-01-31T01:28:28Z",
          "1500"
        ],
        [
          "2012-01-31T01:28:27Z",
          "1490"
        ],
        [
          "2012-01-31T01:28:26Z",
          "1490"
        ],
        [
          "2012-01-31T01:28:25Z",
          "1490"
        ],
        [
          "2012-01-31T01:28:24Z",
          "1490"
        ],
        [
          "2012-01-31T01:28:20Z",
          "1490"
        ],
        [
          "2012-01-31T01:28:10Z",
          "1490"
        ],
        [
          "2012-01-31T01:28:00Z",
          "1489"
        ],
        [
          "2012-01-31T01:27:50Z",
          "1482"
        ],
        [
          "2012-01-31T01:27:40Z",
          "1482"
        ],
        [
          "2012-01-31T01:27:30Z",
          "1475"
        ],
        [
          "2012-01-31T01:27:20Z",
          "1479"
        ],
        [
          "2012-01-31T01:27:10Z",
          "1550"
        ],
        [
          "2012-01-31T01:27:00Z",
          "1523"
        ],
        [
          "2012-01-31T01:26:50Z",
          "1487"
        ],
        [
          "2012-01-31T01:26:40Z",
          "1474"
        ],
        [
          "2012-01-31T01:26:30Z",
          "1476"
        ],
        [
          "2012-01-31T01:26:20Z",
          "1461"
        ],
        [
          "2012-01-31T01:26:10Z",
          "1461"
        ],
        [
          "2012-01-31T01:26:00Z",
          "1814"
        ],
        [
          "2012-01-31T01:25:50Z",
          "1963"
        ],
        [
          "2012-01-31T01:25:40Z",
          "1962"
        ],
        [
          "2012-01-31T01:25:30Z",
          "1960"
        ],
        [
          "2012-01-31T01:25:20Z",
          "1967"
        ],
        [
          "2012-01-31T01:25:10Z",
          "1962"
        ],
        [
          "2012-01-31T01:25:00Z",
          "1968"
        ],
        [
          "2012-01-31T01:24:50Z",
          "1964"
        ],
        [
          "2012-01-31T01:24:40Z",
          "1960"
        ],
        [
          "2012-01-31T01:24:30Z",
          "1967"
        ],
        [
          "2012-01-31T01:24:20Z",
          "1974"
        ],
        [
          "2012-01-31T01:24:10Z",
          "1968"
        ],
        [
          "2012-01-31T01:24:00Z",
          "1990"
        ],
        [
          "2012-01-31T01:23:50Z",
          "2040"
        ],
        [
          "2012-01-31T01:23:40Z",
          "2045"
        ],
        [
          "2012-01-31T01:23:30Z",
          "2012"
        ]
      ]
    },
    {
      "scopeId": 1,
      "name": "Hour",
      "stamp": "2012-01-31T01:28:00Z",
      "value": 1681,
      "observations": [
        [
          "2012-01-31T01:28:00Z",
          "1490"
        ],
        [
          "2012-01-31T01:27:00Z",
          "1499"
        ],
        [
          "2012-01-31T01:26:00Z",
          "1529"
        ],
        [
          "2012-01-31T01:25:00Z",
          "1964"
        ],
        [
          "2012-01-31T01:24:00Z",
          "1971"
        ],
        [
          "2012-01-31T01:23:00Z",
          "2028"
        ],
        [
          "2012-01-31T01:22:00Z",
          "2030"
        ],
        [
          "2012-01-31T01:21:00Z",
          "2036"
        ],
        [
          "2012-01-31T01:20:00Z",
          "1911"
        ],
        [
          "2012-01-31T01:19:00Z",
          "1523"
        ],
        [
          "2012-01-31T01:18:00Z",
          "1497"
        ],
        [
          "2012-01-31T01:17:00Z",
          "1549"
        ],
        [
          "2012-01-31T01:16:00Z",
          "1519"
        ],
        [
          "2012-01-31T01:15:00Z",
          "1696"
        ],
        [
          "2012-01-31T01:14:00Z",
          "2006"
        ],
        [
          "2012-01-31T01:13:00Z",
          "1994"
        ],
        [
          "2012-01-31T01:12:00Z",
          "2051"
        ],
        [
          "2012-01-31T01:11:00Z",
          "2059"
        ],
        [
          "2012-01-31T01:10:00Z",
          "2056"
        ],
        [
          "2012-01-31T01:09:00Z",
          "1783"
        ],
        [
          "2012-01-31T01:08:00Z",
          "1528"
        ],
        [
          "2012-01-31T01:07:00Z",
          "1442"
        ],
        [
          "2012-01-31T01:06:00Z",
          "1336"
        ],
        [
          "2012-01-31T01:05:00Z",
          "1345"
        ],
        [
          "2012-01-31T01:04:00Z",
          "1768"
        ],
        [
          "2012-01-31T01:03:00Z",
          "1831"
        ],
        [
          "2012-01-31T01:02:00Z",
          "1862"
        ],
        [
          "2012-01-31T01:01:00Z",
          "1913"
        ],
        [
          "2012-01-31T01:00:00Z",
          "1898"
        ],
        [
          "2012-01-31T00:59:00Z",
          "1860"
        ],
        [
          "2012-01-31T00:58:00Z",
          "1401"
        ],
        [
          "2012-01-31T00:57:00Z",
          "1333"
        ],
        [
          "2012-01-31T00:56:00Z",
          "1336"
        ],
        [
          "2012-01-31T00:55:00Z",
          "1355"
        ],
        [
          "2012-01-31T00:54:00Z",
          "1377"
        ],
        [
          "2012-01-31T00:53:00Z",
          "1814"
        ],
        [
          "2012-01-31T00:52:00Z",
          "1824"
        ],
        [
          "2012-01-31T00:51:00Z",
          "1869"
        ],
        [
          "2012-01-31T00:50:00Z",
          "1876"
        ],
        [
          "2012-01-31T00:49:00Z",
          "1889"
        ],
        [
          "2012-01-31T00:48:00Z",
          "1726"
        ],
        [
          "2012-01-31T00:47:00Z",
          "1382"
        ],
        [
          "2012-01-31T00:46:00Z",
          "1329"
        ],
        [
          "2012-01-31T00:45:00Z",
          "1341"
        ],
        [
          "2012-01-31T00:44:00Z",
          "1324"
        ],
        [
          "2012-01-31T00:43:00Z",
          "1405"
        ],
        [
          "2012-01-31T00:42:00Z",
          "1828"
        ],
        [
          "2012-01-31T00:41:00Z",
          "1811"
        ],
        [
          "2012-01-31T00:40:00Z",
          "1879"
        ],
        [
          "2012-01-31T00:39:00Z",
          "1911"
        ],
        [
          "2012-01-31T00:38:00Z",
          "1885"
        ],
        [
          "2012-01-31T00:37:00Z",
          "1620"
        ],
        [
          "2012-01-31T00:36:00Z",
          "1352"
        ],
        [
          "2012-01-31T00:35:00Z",
          "1318"
        ],
        [
          "2012-01-31T00:34:00Z",
          "1321"
        ],
        [
          "2012-01-31T00:33:00Z",
          "1337"
        ],
        [
          "2012-01-31T00:32:00Z",
          "1481"
        ],
        [
          "2012-01-31T00:31:00Z",
          "1821"
        ],
        [
          "2012-01-31T00:30:00Z",
          "1847"
        ],
        [
          "2012-01-31T00:29:00Z",
          "1893"
        ]
      ]
    },
    {
      "scopeId": 2,
      "name": "Day",
      "stamp": "2012-01-31T01:00:00Z",
      "value": 1576,
      "observations": [
        [
          "2012-01-31T01:00:00Z",
          "1763"
        ],
        [
          "2012-01-31T00:00:00Z",
          "1757"
        ],
        [
          "2012-01-30T23:00:00Z",
          "2423"
        ],
        [
          "2012-01-30T22:00:00Z",
          "5138"
        ],
        [
          "2012-01-30T21:00:00Z",
          "1916"
        ],
        [
          "2012-01-30T20:00:00Z",
          "803"
        ],
        [
          "2012-01-30T19:00:00Z",
          "741"
        ],
        [
          "2012-01-30T18:00:00Z",
          "1849"
        ],
        [
          "2012-01-30T17:00:00Z",
          "2711"
        ],
        [
          "2012-01-30T16:00:00Z",
          "1494"
        ],
        [
          "2012-01-30T15:00:00Z",
          "986"
        ],
        [
          "2012-01-30T14:00:00Z",
          "792"
        ],
        [
          "2012-01-30T13:00:00Z",
          "2848"
        ],
        [
          "2012-01-30T12:00:00Z",
          "2282"
        ],
        [
          "2012-01-30T11:00:00Z",
          "885"
        ],
        [
          "2012-01-30T10:00:00Z",
          "1333"
        ],
        [
          "2012-01-30T09:00:00Z",
          "886"
        ],
        [
          "2012-01-30T08:00:00Z",
          "792"
        ],
        [
          "2012-01-30T07:00:00Z",
          "705"
        ],
        [
          "2012-01-30T06:00:00Z",
          "704"
        ],
        [
          "2012-01-30T05:00:00Z",
          "558"
        ],
        [
          "2012-01-30T04:00:00Z",
          "803"
        ],
        [
          "2012-01-30T03:00:00Z",
          "1126"
        ],
        [
          "2012-01-30T02:00:00Z",
          "2517"
        ]
      ]
    },
    {
      "scopeId": 3,
      "name": "Month",
      "stamp": "2012-01-30T05:00:00Z",
      "value": 1662,
      "observations": [
        [
          "2012-01-30T05:00:00Z",
          "1589"
        ],
        [
          "2012-01-29T05:00:00Z",
          "1718"
        ],
        [
          "2012-01-28T05:00:00Z",
          "1820"
        ],
        [
          "2012-01-27T05:00:00Z",
          "1275"
        ],
        [
          "2012-01-26T05:00:00Z",
          "1693"
        ],
        [
          "2012-01-25T05:00:00Z",
          "1924"
        ],
        [
          "2012-01-24T05:00:00Z",
          "2134"
        ],
        [
          "2012-01-23T05:00:00Z",
          "1715"
        ],
        [
          "2012-01-22T05:00:00Z",
          "1870"
        ],
        [
          "2012-01-21T05:00:00Z",
          "1930"
        ],
        [
          "2012-01-20T05:00:00Z",
          "1752"
        ],
        [
          "2012-01-19T05:00:00Z",
          "1553"
        ],
        [
          "2012-01-18T05:00:00Z",
          "1681"
        ],
        [
          "2012-01-17T05:00:00Z",
          "1741"
        ],
        [
          "2012-01-16T05:00:00Z",
          "1645"
        ],
        [
          "2012-01-15T05:00:00Z",
          "1426"
        ],
        [
          "2012-01-14T05:00:00Z",
          "1177"
        ],
        [
          "2012-01-13T05:00:00Z",
          "1617"
        ],
        [
          "2012-01-12T05:00:00Z",
          "1904"
        ],
        [
          "2012-01-11T05:00:00Z",
          "1682"
        ],
        [
          "2012-01-10T05:00:00Z",
          "1167"
        ],
        [
          "2012-01-09T05:00:00Z",
          "1975"
        ],
        [
          "2012-01-08T05:00:00Z",
          "1404"
        ],
        [
          "2012-01-07T05:00:00Z",
          "1426"
        ],
        [
          "2012-01-06T05:00:00Z",
          "1810"
        ],
        [
          "2012-01-05T05:00:00Z",
          "1755"
        ],
        [
          "2012-01-04T05:00:00Z",
          "2137"
        ],
        [
          "2012-01-03T05:00:00Z",
          "1419"
        ],
        [
          "2012-01-02T05:00:00Z",
          "1370"
        ],
        [
          "2012-01-01T05:00:00Z",
          "1546"
        ]
      ]
    },
    {
      "scopeId": 3,
      "name": "Year",
      "stamp": "2012-01-30T05:00:00Z",
      "value": 1510,
      "observations": [
        [
          "2012-01-01T05:00:00Z",
          "1661.8333"
        ],
        [
          "2011-12-01T05:00:00Z",
          "1635.0000"
        ],
        [
          "2011-11-01T04:00:00Z",
          "1442.0000"
        ],
        [
          "2011-10-01T04:00:00Z",
          "1233.4839"
        ],
        [
          "2011-09-01T04:00:00Z",
          "1369.2727"
        ],
        [
          "2011-08-01T04:00:00Z",
          "1327.2903"
        ],
        [
          "2011-07-01T04:00:00Z",
          "1539.5806"
        ],
        [
          "2011-06-01T04:00:00Z",
          "1392.7333"
        ],
        [
          "2011-05-01T04:00:00Z",
          "1432.1935"
        ],
        [
          "2011-04-01T04:00:00Z",
          "1574.5667"
        ],
        [
          "2011-03-01T05:00:00Z",
          "1557.1290"
        ],
        [
          "2011-02-01T05:00:00Z",
          "1718.7500"
        ],
        [
          "2011-01-01T05:00:00Z",
          "1814.1935"
        ],
        [
          "2010-12-01T05:00:00Z",
          "1766.1290"
        ],
        [
          "2010-11-01T04:00:00Z",
          "1624.8000"
        ],
        [
          "2010-10-01T04:00:00Z",
          "1365.8065"
        ],
        [
          "2010-09-09T04:00:00Z",
          "1335.5455"
        ],
        [
          "2010-07-01T04:00:00Z",
          "1344.4091"
        ],
        [
          "2010-06-01T04:00:00Z",
          "1287.8000"
        ],
        [
          "2010-05-01T04:00:00Z",
          "1526.1935"
        ],
        [
          "2010-04-01T04:00:00Z",
          "1484.2333"
        ],
        [
          "2010-03-01T05:00:00Z",
          "1602.0968"
        ],
        [
          "2010-02-01T05:00:00Z",
          "1624.5357"
        ],
        [
          "2010-01-01T05:00:00Z",
          "1611.6129"
        ]
      ]
    }
  ];

  
      app.samples=sampleState();

})();

